# Streamer Bot Clip Helper

## Features

Originally inspired by the streamer bot video shout out this has grown well beyond the original scope. This can be used as a drop-in replacement for the original shout out but it provides some additional functionality:

- Video source: Embed any video source in your overlay
- Media controls: Play, pause, rewind and fast forward clips and videos embedded in your overlay.
- Playback progress: Progress indicator at the bottom of the video
- Auto scene change: Changes to another scene to play clips

## Building

Build the Zerifax.ClipHelper project and copy the following assemblies into the root of the Streamer Bot folder:

- Zerifax.ClipHelper.dll
- Newtonsoft.Json.dll

## Setup

The clip player functionality depends on the built in websocket server for Streamer Bot and triggers two of the actions from the import section below.

Setup a new custom websocket server with the following settings. Note the connected and message actions. You can pick a different address if you need to.

![Websocket Settings](websocket.png)

The connected action is used to capture the session used for media controls. The message action is used to hide the overlay on completion.

Some settings will need to be changed in the actions.

Play Clip: 
- Edit ClipBrowserSource and ClipScene to match your source in OBS.
- Edit ClipFile to point to the clip.html file.
- Edit ClipWebSocket only if needed.
- Update the references to OBS elements as needed. Currently this is set up for a browser source with an image backgrounds.
- Add references to the assemblies built above.

Set Clip:
- Update the references to OBS elements as per the play clip action.

Set Scene:
- This handles the scene change, you will need to configure the OBS sources and scene references for your setup.

Stop Clip:
- This handles what needs to happen when the clip stops playing

There's also a Play BRB Clips action which selects a set of clips to queue up and play. This will loop through the list until stopped.

If you wish to automatically detect twitch clips in messages (and you allow URL's in chat) you can create a command that calls the SetClip action. For this command I use a regex to automatically detect clips but you can create a custom command if you desire.

The command regex I use is: `(?:https://clips.twitch.tv/[^\s]+|https://www.twitch.tv/[^/]+/clip/[^\s]+)`

For media controls you will need to either bind these to commands or buttons on your stream deck or equivalent. The actions you can set up are:
- Play Clip (start the clip)
- WS Media Back (rewind 5 seconds)
- WS Media Forward (forward 5 seconds)
- WS Media Rewind (reset to beginning)
- WS Media Play/Pause (pause and resume)
- WS Media Stop (stops the clip)
- Stop Clip (will happen automatically at end of clip unless media controls are used)

## Actions Import

Import the actions and commands into streamer bot before setting up the websocket.

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